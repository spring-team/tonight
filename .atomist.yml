---
kind: "operation"
client: "atomist-bot"
generator:
  name: "NewSpringBootRestService"
  group: "atomist"
  artifact: "spring-rugs"
  version: "0.12.0"
  origin:
    repo: "https://github.com/atomist/spring-rugs.git"
    branch: "6b9204311de6e06c390e9feddbeb413f57fa32c4"
    sha: "6b92043"
  parameters:
    - "artifactId": "spring-rest-seed"
    - "groupId": "com.atomist.seeds"
    - "version": "0.1.0-SNAPSHOT"
    - "description": "RestService for creating Spring REST services"
    - "rootPackage": "com.atomist.springteam"
    - "serviceClassName": "RestService"

---
kind: "operation"
client: "com.atomist:rug"
version: "1.0.0-20170609011313"
editor:
  name: "PrepareTravisBuildFiles"
  group: "atomist"
  artifact: "spring-team-handlers"
  version: "0.2.34"
  parameters:
    - "project": "tonight"
    - "owner": "spring-team"
    - "encryptedGithubToken": "u**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryUser": "s**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryToken": "M**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="

---
kind: "operation"
client: "com.atomist:rug"
version: "1.0.0-20170609011313"
editor:
  name: "PrepareTravisBuildFiles"
  group: "atomist"
  artifact: "spring-team-handlers"
  version: "0.2.36"
  parameters:
    - "project": "tonight"
    - "owner": "spring-team"
    - "encryptedGithubToken": "o**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryUser": "U**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryToken": "v**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="

---
kind: "operation"
client: "com.atomist:rug"
version: "1.0.0-20170609011313"
editor:
  name: "Cascade"
  group: "atomist"
  artifact: "spring-team-handlers"
  version: "0.3.1"
  parameters:
    - "script": "{"description":"Cascaded changes from `spring-rest-seed`","steps":[{"primitive":"AddFile","description":"Add file .gitattributes","payload":{"path":".gitattributes","content":".atomist.yml linguist-generated=true\n"}},{"primitive":"AddFile","description":"Add file .travis.yml","payload":{"path":".travis.yml","content":"dist: trusty\nsudo: required\nlanguage: java\njdk:\n- oraclejdk8\nbranches:\n  except:\n  - \"/\\\\+travis\\\\d+$/\"\nenv:\n  global:\n  - secure: A8wtHWu3V1kYOSC5Kr7/3XtPBm5gV52tpxI4Mc8ZNTVvSLZTDETwspWtShACMYv01pxR2KFU0xeWHFcOlrb+WZnEOKCyz8r5l3MsOuijT+gRvNYys7t5vCB2/XaBy6n2cSqqZSA9UMtwdztgyLC5Zq7ohofnLdPOc2HIBvWJujiuuApRHXy79MAsVW+xLAjk9b4qQsJvw0TuC+6lBrzFmnFAM9YU23hoedVc3GlrL67GffZmNQQ1qeOS34O7YMqjgt1fCIbV5X7cehnf8Y8yfCPUYqARzv57qWtg6cN4JWzKMwIEJYNUgoChW7Ib+M6rbkY0eSsFK6HHAAHehflbiRfM1jbUSuzWqdF4wdrfMPeI1BQ6kCuF/qswjegxSVJVaMVj8GYLdXk2yEOFv3Y2VPktBgNVFgUFk7wiEuQa+GJmtU8IkKiV4+DPA5ZD7SjL0ClqAZhLwNfTi33FQYqQ1OS07YxmGPDbndKXWtPToPmVUEH7IePti6b77fhlFdFjmb5pv0NOHfD1ak0ZVGWN+tdk5Fh/6zFeU4tUNncsyoB/hT4twt3Sao5sSw86mQ08oOMt5I64x/Hmybf2/emeFlItp1FazfJjALTIfGAXZoQ6ckqNYMV+8H1B6C2o8Veobn+EU22mRWJd8mMrUReJGP6PcA/r67XcgIkZIZlBeGk=\n  - secure: k6aZeMStsCliEuCxwWzEuydaUhaMFa9gag7Pi7lZLOUL/15HOYgT/4MwfxwRCqCkmxNDHNI7YcqGNn6ec6jmK+6Sr7MWJsCPsywEdN4aIHSDhqBZO5+xx76kmqKEasM4PJ0A3UFzrtqKf99Zczz93rCTeCKst1vPwzKU/Utn8fpSTm9WM2m6Xt3r4U/PoDbNs1w9QkWRer8AAw4RBAjf0Knq8ohVENMWuO9Slupf8TZE3+ta16ZSEcJNHpGeCuA/+ABHTowTh5OZz9VEYTBmCY1D/UpVklLbB8/heNrMGB8GTCjVnz8RtBJwhMC1pvB8Tn/7tRFQlyi2sfIwTg6bRbLwCMGmcqgQ/qAXH6v0sn2L4KEhJl8oo7YTZPh5Kj8soka6PZml9wvNeBloRuhutjG39vrkrvC6eZMFa6r7BXZW1/kIu4OTdlaocTbZNNnwV0h1dPc2dzVtu2fyIwmVuD9riPNv/M0l6psUNhhV5GmuPvo9iK5sLDQy/lE0t5sRQi0Xtg/2PKDmjG7tgtetJOR5Jc8NXz3rshkz5uhpDH0/aY9/ZBluQ6xhpFG0ZFKKbpZBW23FyG+fTFCFm5786YqYDNTpSVXOaXkJrUAs4ug/1KZp9Xc04L3BgV8k5h/GomSOYD0QobT8mhIpqa9imeicHtYpVdKqzeoAYKvvS1Q=\n  - secure: cJskABAq+CD71N1GYTOHm2tY00fQKjQzQnvBP7DfP7wTr8+wZCH+dTDDUSmTdcOVHO7c58kQKEozuR3S265qU2aUl8FnSYRDp/P4I++8rz1faP+Fx/qgX6TGm+Ac8bl0PK6VDmY+wIdi6e4r0hqcfI0mVyult4B1ekja3S4p0dtr1whpWLM07xyXpUugJbgmI1AP7rEo5uG66dn7h8c4xy5INBM+AIGrcisUenlFCbwLQwl+tm91/0k33S4/H507mBrMtGh6VpOvwUUkPcetwxsAxJ/z7fERNZPeYyL2I3XSkI63i7J9gUVFmOqaNoUpPahJmWVMAvmJd/Z5MA0Pwb8Suvwagrqxaa6mOvM5mU++LNZnryjozTCLE4p+I90CEMKGnAD97rdVMNe5HWgvIlW8T61rQoTrXkKnS8/DDWu743CuAxhaHXbh4S0vez4spd/EXTbL099d8x+Y9Yx4hWJ4E/BYhJMzjT95r2TS0mliTKEkFJfHiOyooDyjK+z57Uo6A3YqFsRTmUp4tH8Nxw6icQTPddSvJ7zw/pSHLy2A+s5Ua/x51W/V+t/HHCH9F6QDON7LyDz2+fxGl20aQyEdsaZGzVVNXqnwcQ12DhpKk7kax21w6sHizbfsCuPSgmrMmnZmh3Rivem9OczE3DGyXOdzS8vnf1hJeq7tuVk=\n  - MAVEN_BASE_URL=https://atomist.jfrog.io/atomist\ninstall: true\nscript: bash src/main/scripts/travis-build.bash\nnotifications:\n  email: false\n  webhooks:\n    urls:\n    - https://webhook.atomist.com/travis\n    on_success: always\n    on_failure: always\n    on_start: always\n    on_cancel: always\n    on_error: always\ncache:\n  directories:\n  - \"$HOME/.m2\"\n"}},{"primitive":"AddFile","description":"Add file src/main/scripts/travis-build.bash","payload":{"path":"src/main/scripts/travis-build.bash","content":"#!/bin/bash\n# build, test, and publish maven projects on Travis CI\n\nset -o pipefail\n\ndeclare Pkg=travis-build-mvn\ndeclare Version=0.4.0\n\nfunction msg() {\n    echo \"$Pkg: $*\"\n}\n\nfunction err() {\n    msg \"$*\" 1>&2\n}\n\nfunction main() {\n    msg \"branch is ${TRAVIS_BRANCH}\"\n\n    local mvn=\"mvn --settings .settings.xml -B -V -U -Datomist.enabled=false\"\n\n    local project_version\n    if [[ $TRAVIS_TAG =~ ^[0-9]+\\.[0-9]+\\.[0-9]+(-(m|rc)\\.[0-9]+)?$ ]]; then\n        if ! mvn build-helper:parse-version versions:set -DnewVersion=\"$TRAVIS_TAG\" versions:commit; then\n            err \"failed to set project version to $TRAVIS_TAG\"\n            return 1\n        fi\n        project_version=$TRAVIS_TAG\n    else\n        project_version=$(mvn help:evaluate -Dexpression=project.version | grep -E '^[0-9]+\\.[0-9]+\\.[0-9](-([0-9]{14}|SNAPSHOT))?$' | tail -n 1)\n        if [[ $? != 0 || ! $project_version ]]; then\n            err \"failed to parse project version\"\n            return 1\n        fi\n    fi\n\n    if ! $mvn install -Dmaven.javadoc.skip=true; then\n        err \"maven install failed\"\n        return 1\n    fi\n\n    if [[ $TRAVIS_PULL_REQUEST != false ]]; then\n        msg \"not deploying pull request\"\n        return 0\n    fi\n\n    if [[ $TRAVIS_BRANCH == master || $TRAVIS_TAG =~ ^[0-9]+\\.[0-9]+\\.[0-9]+(-(m|rc)\\.[0-9]+)?$ ]]; then\n        if [[ $TRAVIS_REPO_SLUG == *-seed ]]; then\n            msg \"not deploying seed project\"\n        else\n            if ! $mvn deploy -DskipTests; then\n                err \"maven deploy failed\"\n                return 1\n            fi\n        fi\n\n        if ! git config --global user.email \"travis-ci@atomist.com\"; then\n            err \"failed to set git user email\"\n            return 1\n        fi\n        if ! git config --global user.name \"Travis CI\"; then\n            err \"failed to set git user name\"\n            return 1\n        fi\n        local git_tag=$project_version+travis$TRAVIS_BUILD_NUMBER\n        if ! git tag \"$git_tag\" -m \"Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER\"; then\n            err \"failed to create git tag: $git_tag\"\n            return 1\n        fi\n        local remote=origin\n        if [[ $GITHUB_TOKEN ]]; then\n            remote=https://$GITHUB_TOKEN@github.com/$TRAVIS_REPO_SLUG\n        fi\n        if ! git push --quiet --tags \"$remote\" > /dev/null 2>&1; then\n            err \"failed to push git tags\"\n            return 1\n        fi\n    fi\n}\n\nmain \"$@\" || exit 1\nexit 0\n"}}]}"

---
kind: "operation"
client: "com.atomist:rug"
version: "1.0.0-20170609011313"
editor:
  name: "PrepareTravisBuildFiles"
  group: "atomist"
  artifact: "spring-team-handlers"
  version: "0.3.1"
  parameters:
    - "project": "tonight"
    - "owner": "spring-team"
    - "encryptedGithubToken": "E**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryUser": "H**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="
    - "encryptedArtifactoryToken": "f**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************="

